<!DOCTYPE html>
<html>
  <head>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  </head>
  <body>
    <script>
        function getJoke() {
          return new Promise((resolve, reject) => {
            $.get('https://api.chucknorris.io/jokes/random', joke => {
              if (joke.value) {
                resolve(joke.value)
              }

              reject(new Error("Could not retrieve joke"))
            })
          })
        }

        // let jokePromises = Array(4).fill().map(getJoke)
        let jokePromises = 

        for (let i=0; i < 4; i++) {
          jokePromises.push(getJoke())
        }

        // Wait for all promises in the array to resolve and
        // pass an array of the results to the then
        Promise.all(jokePromises)
          .then(jokes => console.log(jokes)) // 'jokes' is an array of the promise results
          .catch(err => console.log(err))

        // $.get('https://api.chucknorris.io/jokes/random', data => {
        //     console.log(data)
        //     $.get('https://api.chucknorris.io/jokes/random', data => {
        //         console.log(data)
        //         $.get('https://api.chucknorris.io/jokes/random', data => {
        //             console.log(data)
        //         })
        //     })
        // })
        console.log("Requests sent")
    </script>
  </body>
</html>
